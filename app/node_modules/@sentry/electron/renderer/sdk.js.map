{"version":3,"file":"sdk.js","sourceRoot":"","sources":["../src/renderer/sdk.ts"],"names":[],"mappings":";;AAAA,0CAA0C;AAC1C,6CAIyB;AACzB,yCAAuC;AAEvC,sCAA0C;AAC1C,iDAA6C;AAC7C,+CAA4D;AAC5D,2CAAoD;AAEvC,QAAA,mBAAmB,GAAG,CAAC,GAAG,6BAA0B,EAAE,IAAI,0BAAW,EAAE,CAAC,CAAC;AAEtF;;;;;GAKG;AACH,SAAgB,IAAI,CAClB,UAA8B,EAAwB;AACtD,8GAA8G;AAC9G,eAA2F,cAAW;IAEtG,IAAA,sBAAa,EAAC,UAAU,CAAC,CAAC;IAE1B,+CAA+C;IAC/C,IAAI,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,yBAAyB,EAAE;QACrC,cAAM,CAAC,IAAI,CAAC;sHACsG,CAAC,CAAC;QACpH,OAAO;KACR;IAED,MAAM,CAAC,yBAAyB,GAAG,IAAI,CAAC;IAExC,6FAA6F;IAC7F,4BAA4B;IAC5B,IAAI,OAAO,CAAC,mBAAmB,KAAK,SAAS,EAAE;QAC7C,OAAO,CAAC,mBAAmB,GAAG,KAAK,CAAC;KACrC;IAED,kEAAkE;IAClE,iCAAiC;IACjC,OAAO,CAAC,iBAAiB,GAAG,KAAK,CAAC;IAElC,IAAI,OAAO,CAAC,mBAAmB,KAAK,SAAS,EAAE;QAC7C,OAAO,CAAC,mBAAmB,GAAG,2BAAmB,CAAC;KACnD;IAED,IAAI,OAAO,CAAC,WAAW,KAAK,SAAS,EAAE;QACrC,OAAO,CAAC,WAAW,GAAG,yCAA2B,CAAC;KACnD;IAED,IAAI,OAAO,CAAC,GAAG,KAAK,SAAS,EAAE;QAC7B,8EAA8E;QAC9E,OAAO,CAAC,GAAG,GAAG,+BAA+B,CAAC;KAC/C;IAED,IAAI,OAAO,CAAC,SAAS,KAAK,SAAS,EAAE;QACnC,OAAO,CAAC,SAAS,GAAG,iCAAqB,CAAC;KAC3C;IAED,kGAAkG;IAClG,OAAO,OAAO,CAAC,YAAY,CAAC;IAE5B,YAAY,CAAC,OAAO,CAAC,CAAC;AACxB,CAAC;AA/CD,oBA+CC","sourcesContent":["/* eslint-disable no-restricted-globals */\nimport {\n  BrowserOptions,\n  defaultIntegrations as defaultBrowserIntegrations,\n  init as browserInit,\n} from '@sentry/browser';\nimport { logger } from '@sentry/utils';\n\nimport { ensureProcess } from '../common';\nimport { ScopeToMain } from './integrations';\nimport { electronRendererStackParser } from './stack-parse';\nimport { makeRendererTransport } from './transport';\n\nexport const defaultIntegrations = [...defaultBrowserIntegrations, new ScopeToMain()];\n\n/**\n * Initialize Sentry in the Electron renderer process\n * @param options SDK options\n * @param originalInit Optional init function for a specific framework SDK\n * @returns\n */\nexport function init<O extends BrowserOptions>(\n  options: BrowserOptions & O = {} as BrowserOptions & O,\n  // This parameter name ensures that TypeScript error messages contain a hint for fixing SDK version mismatches\n  originalInit: (if_you_get_a_typescript_error_ensure_sdks_use_version_v7_61_0: O) => void = browserInit,\n): void {\n  ensureProcess('renderer');\n\n  // Ensure the browser SDK is only init'ed once.\n  if (window?.__SENTRY__RENDERER_INIT__) {\n    logger.warn(`The browser SDK has already been initialized.\nIf init has been called in the preload and contextIsolation is disabled, is not required to call init in the renderer`);\n    return;\n  }\n\n  window.__SENTRY__RENDERER_INIT__ = true;\n\n  // We don't want browser session tracking enabled by default because we already have Electron\n  // specific session tracking\n  if (options.autoSessionTracking === undefined) {\n    options.autoSessionTracking = false;\n  }\n\n  // Disable client reports for renderer as the sdk should only send\n  // events using the main process.\n  options.sendClientReports = false;\n\n  if (options.defaultIntegrations === undefined) {\n    options.defaultIntegrations = defaultIntegrations;\n  }\n\n  if (options.stackParser === undefined) {\n    options.stackParser = electronRendererStackParser;\n  }\n\n  if (options.dsn === undefined) {\n    // Events are sent via the main process but browser SDK wont start without dsn\n    options.dsn = 'https://12345@dummy.dsn/12345';\n  }\n\n  if (options.transport === undefined) {\n    options.transport = makeRendererTransport;\n  }\n\n  // We only handle initialScope in the main process otherwise it can cause race conditions over IPC\n  delete options.initialScope;\n\n  originalInit(options);\n}\n"]}