{"version":3,"file":"event-to-main.js","sourceRoot":"","sources":["../../../src/renderer/integrations/event-to-main.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,SAAS,EAAE,MAAM,eAAe,CAAC;AAE1C,OAAO,EAAE,MAAM,EAAE,MAAM,QAAQ,CAAC;AAEhC;;GAEG;AACH,MAAM,OAAO,WAAW;IAAxB;QAIE,kBAAkB;QACX,SAAI,GAAW,WAAW,CAAC,EAAE,CAAC;IAkBvC,CAAC;IAhBC,kBAAkB;IACX,SAAS,CAAC,uBAA2D;QAC1E,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC;QAErB,uBAAuB,CAAC,CAAC,KAAY,EAAE,EAAE;YACvC,8EAA8E;YAC9E,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC,WAAW,IAAI,EAAE,CAAC;YAE5C,oGAAoG;YACpG,OAAO,KAAK,CAAC,WAAW,CAAC;YAEzB,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,EAAE,EAAE,EAAE,IAAK,CAAC,CAAC,CAAC,CAAC;YAC3D,gHAAgH;YAChH,OAAO,IAAI,CAAC;QACd,CAAC,CAAC,CAAC;IACL,CAAC;;AArBD,kBAAkB;AACJ,cAAE,GAAW,aAAa,CAAC","sourcesContent":["import { Event, EventProcessor, Integration } from '@sentry/types';\nimport { normalize } from '@sentry/utils';\n\nimport { getIPC } from '../ipc';\n\n/**\n * Passes events to the main process.\n */\nexport class EventToMain implements Integration {\n  /** @inheritDoc */\n  public static id: string = 'EventToMain';\n\n  /** @inheritDoc */\n  public name: string = EventToMain.id;\n\n  /** @inheritDoc */\n  public setupOnce(addGlobalEventProcessor: (callback: EventProcessor) => void): void {\n    const ipc = getIPC();\n\n    addGlobalEventProcessor((event: Event) => {\n      // Ensure breadcrumbs is not `undefined` as `walk` translates it into a string\n      event.breadcrumbs = event.breadcrumbs || [];\n\n      // Remove the environment as it defaults to 'production' and overwrites the main process environment\n      delete event.environment;\n\n      ipc.sendEvent(JSON.stringify(normalize(event, 20, 2_000)));\n      // Events are handled and sent from the main process so we return null here so nothing is sent from the renderer\n      return null;\n    });\n  }\n}\n"]}