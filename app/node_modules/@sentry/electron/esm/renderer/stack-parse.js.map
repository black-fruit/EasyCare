{"version":3,"file":"stack-parse.js","sourceRoot":"","sources":["../../src/renderer/stack-parse.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,qBAAqB,EAAE,MAAM,iBAAiB,CAAC;AAExD,OAAO,EAAE,iBAAiB,EAAE,mBAAmB,EAAE,2BAA2B,EAAE,MAAM,eAAe,CAAC;AAEpG,MAAM,sBAAsB,GAAG,EAAE,CAAC;AAElC,MAAM,CAAC,EAAE,MAAM,CAAC,GAAG,qBAAqB,CAAC;AACzC,MAAM,CAAC,EAAE,IAAI,CAAC,GAAG,mBAAmB,EAAE,CAAC;AAEvC;;GAEG;AACH,MAAM,CAAC,MAAM,2BAA2B,GAAgB,CAAC,KAAa,EAAE,YAAoB,CAAC,EAAgB,EAAE;IAC7G,MAAM,MAAM,GAAiB,EAAE,CAAC;IAEhC,KAAK,MAAM,IAAI,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE;QACrD,MAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;QACjC,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;QAE7B,qDAAqD;QACrD,IAAI,WAAW,IAAI,CAAA,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,MAAM,MAAK,KAAK,EAAE;YAC9C,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SAC1B;aAAM,IAAI,SAAS,EAAE;YACpB,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC,CAAC;SAC3C;QAED,IAAI,MAAM,CAAC,MAAM,IAAI,sBAAsB,EAAE;YAC3C,MAAM;SACP;KACF;IAED,OAAO,2BAA2B,CAAC,MAAM,CAAC,CAAC;AAC7C,CAAC,CAAC","sourcesContent":["import { chromeStackLineParser } from '@sentry/browser';\nimport { StackFrame, StackParser } from '@sentry/types';\nimport { dropUndefinedKeys, nodeStackLineParser, stripSentryFramesAndReverse } from '@sentry/utils';\n\nconst STACKTRACE_FRAME_LIMIT = 50;\n\nconst [, chrome] = chromeStackLineParser;\nconst [, node] = nodeStackLineParser();\n\n/**\n * A stack parser than combines Chrome and node.js parsers to give the best results even when nodeIntegration = true\n */\nexport const electronRendererStackParser: StackParser = (stack: string, skipFirst: number = 0): StackFrame[] => {\n  const frames: StackFrame[] = [];\n\n  for (const line of stack.split('\\n').slice(skipFirst)) {\n    const chromeFrame = chrome(line);\n    const nodeFrame = node(line);\n\n    // We favour the chrome parser unless in_app == false\n    if (chromeFrame && nodeFrame?.in_app !== false) {\n      frames.push(chromeFrame);\n    } else if (nodeFrame) {\n      frames.push(dropUndefinedKeys(nodeFrame));\n    }\n\n    if (frames.length >= STACKTRACE_FRAME_LIMIT) {\n      break;\n    }\n  }\n\n  return stripSentryFramesAndReverse(frames);\n};\n"]}