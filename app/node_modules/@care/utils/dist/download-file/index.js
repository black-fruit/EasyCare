"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var url_to_blob_1 = __importDefault(require("./util/url-to-blob"));
exports.url2Blob = url_to_blob_1.default;
var save_blob_as_file_1 = __importDefault(require("./util/save-blob-as-file"));
exports.saveBlobAsFile = save_blob_as_file_1.default;
/**
* 下载文件
* @param  {String} url 目标文件地址
* @param  {String} filename 想要保存的文件名称
*/
var downloadFile = function (url, filename, options) {
    if (options === void 0) { options = {}; }
    if (typeof window === 'undefined') {
        throw new Error('window is undefined');
    }
    var beforeDownload = options.beforeDownload, success = options.success, fail = options.fail, done = options.done;
    if ((beforeDownload && beforeDownload()) === false) {
        return;
    }
    url_to_blob_1.default(url)
        .then(function (blob) {
        save_blob_as_file_1.default(blob, filename);
        success && success();
        done && done();
    })
        .catch(function (err) {
        console.error(err);
        fail && fail(err);
        done && done();
    });
};
exports.default = downloadFile;
