import url2Blob from './util/url-to-blob';
import saveBlobAsFile from './util/save-blob-as-file';
/**
* 下载文件
* @param  {String} url 目标文件地址
* @param  {String} filename 想要保存的文件名称
*/
var downloadFile = function (url, filename, options) {
    if (options === void 0) { options = {}; }
    if (typeof window === 'undefined') {
        throw new Error('window is undefined');
    }
    var beforeDownload = options.beforeDownload, success = options.success, fail = options.fail, done = options.done;
    if ((beforeDownload && beforeDownload()) === false) {
        return;
    }
    url2Blob(url)
        .then(function (blob) {
        saveBlobAsFile(blob, filename);
        success && success();
        done && done();
    })
        .catch(function (err) {
        console.error(err);
        fail && fail(err);
        done && done();
    });
};
export default downloadFile;
export { url2Blob, saveBlobAsFile };
