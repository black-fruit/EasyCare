/**
 * @description 根据当前的location信息创建一个新的url
 * @param {string} appendUrl
 * @param {boolean} useSearch
 * @param {boolean} useHash
 * @returns {string}
 */
function createBaseUrl(appendUrl: string, useSearch: boolean = true, useHash: boolean = true, localLocation?: Partial<Location> ): string {
  if(typeof window === 'undefined') {
    throw new Error('window is not defined');
  }
  localLocation = window.location;
  const { protocol, hostname, port, search, hash } = localLocation;
  let url = `${protocol}//${hostname}`;
  url += port ? `:${port}` : '';
  url += appendUrl;
  url += useSearch ? `${search}` : '';
  url += useHash ? `${hash}` : '';
  
  return url;
}

export default createBaseUrl;