import px2rem from './px2rem';
/**
 * @description px的样式转换为rem的样式。注意！如果是 px ，务必加上 px 单位
 * @param originStyle
 * 
 * 把 style 里面的 px 值转成 rem 值，如
 * {
 *   fontSize: '32px',
 *   width: '100px',
 * }
 *
 * 转成
 *
 * {
 *   fontSize: '0.5rem',
 *   width: '1.6rem'
 * }
 */
function handleStylePx2rem<T extends object>(originStyle: T, remUnit: number = 75): T {
  let styles = {} as T;
  // px转rem处理
  for (let key in originStyle) {
    if (originStyle.hasOwnProperty(key)) {
      const value = (originStyle as any)[key].toString();
      styles[key] = value.replace(/[1-9]\d*px/gi, (px: string) => {
        return px2rem(parseInt(px), remUnit);
      });
    }
  }
  return styles;
};

export default handleStylePx2rem;