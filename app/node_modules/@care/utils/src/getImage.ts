/**
 * @description 获取加载好的图片
 * @param imageUrl 图片地址
 * @param isCrossDomain 是否需要跨域请求
 */
function getImage(imageUrl: string, isCrossDomain?: boolean) {
  if(typeof window === 'undefined') {
    throw new Error('window is undefined');
  }
  return new Promise<HTMLImageElement>(
    (
      resolve: (value: HTMLImageElement) => void,
      reject: (reason?: any) => void
    ) => {
      let image = new Image();
      if (isCrossDomain) {
        image.setAttribute('crossOrigin', 'anonymous');
      }
      image.onload = () => {
        resolve(image);
      };
      image.onerror = e => {
        console.error(e);
        reject(e);
      };
      image.src = imageUrl;
    }
  );
};

export default getImage;