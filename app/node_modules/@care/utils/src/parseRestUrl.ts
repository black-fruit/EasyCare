/**
 * 处理 restfull url接口
 * 如:
 * /teacher/:courseId/subCourse
 * 转为
 * /teacher/f347951525f34441ac6d537b17202660/subCourse
 * @param {string} url 要处理的url
 * @param {object} data
 * @returns {string}
 */
const parseRestUrl = <T extends any>(url: string, data?: T) => {
  const reg = /\/:(\w+)/gi;
  const routeParams = url.match(reg);
  if (!data || routeParams === null) {
    return url;
  }

  routeParams.forEach((routeParam) => {
    const keyName = routeParam.replace('/:', '');
    if (data[keyName]) {
      url = url.replace(':' + keyName, data[keyName]);
    }
  });

  return url;
}

export default parseRestUrl;